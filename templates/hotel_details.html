<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Details - Hotel Recommendation System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <style>
        .hotel-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        
        .hotel-image {
            height: 300px;
            object-fit: cover;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .hotel-image:hover {
            transform: scale(1.05);
        }
        
        .rating-display {
            font-size: 1.2rem;
            color: #ffc107;
        }
        
        .amenity-badge {
            background: #e3f2fd;
            color: #1976d2;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.875rem;
            margin: 0.25rem;
            display: inline-block;
        }
        
        .review-card {
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            background: #f8f9fa;
        }
        
        .review-rating {
            color: #ffc107;
            font-size: 1.1rem;
        }
        
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .photo-item {
            height: 200px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .photo-item:hover {
            transform: scale(1.05);
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .star-rating {
            display: flex;
            gap: 5px;
            font-size: 1.5rem;
        }
        
        .star {
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .star:hover,
        .star.active {
            color: #ffc107;
        }
        
        .nearby-attraction:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .review-card {
            border-left: 4px solid #667eea;
            background: #f8f9fa;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 10px 10px 0;
        }
        
        .star-rating {
            color: #ffc107;
            font-size: 1.1rem;
        }
        
        .price-level {
            font-size: 1.5rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/dashboard">üè® Hotel Recommendations</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/dashboard">Dashboard</a>
                <a class="nav-link" href="/recommendations">My Recommendations</a>
                <a class="nav-link" href="#" onclick="logout()">Logout</a>
            </div>
        </div>
    </nav>

    <!-- Hotel Header -->
    <div class="hotel-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 id="hotelName">Loading Hotel...</h1>
                    <div class="d-flex align-items-center mb-2">
                        <div class="rating-display me-3" id="hotelRating">
                            <i class="fas fa-star"></i> 0.0
                        </div>
                        <span id="hotelReviews">0 reviews</span>
                    </div>
                    <p class="mb-0" id="hotelLocation">Location loading...</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="h3 mb-0" id="hotelPrice">$0/night</div>
                    <small id="priceRange">Price range</small>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Photo Gallery -->
        <div class="row mb-4">
            <div class="col-12">
                <h3><i class="fas fa-images"></i> Photos</h3>
                <div id="photoGallery" class="photo-gallery">
                    <!-- Photos will be loaded here -->
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Hotel Details -->
            <div class="col-lg-8">
                <!-- Description -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-info-circle"></i> About This Hotel</h5>
                    </div>
                    <div class="card-body">
                        <p id="hotelDescription">Loading description...</p>
                        
                        <!-- Amenities -->
                        <h6>Amenities</h6>
                        <div id="hotelAmenities">
                            <!-- Amenities will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Reviews Section -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5><i class="fas fa-comments"></i> Reviews</h5>
                        <button class="btn btn-primary btn-sm" onclick="showReviewModal()">Write a Review</button>
                    </div>
                    <div class="card-body">
                        <div id="reviewsList">
                            <!-- Reviews will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <!-- Booking Card -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-calendar-check"></i> Book This Hotel</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Check-in Date</label>
                            <input type="date" class="form-control" id="checkinDate">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Check-out Date</label>
                            <input type="date" class="form-control" id="checkoutDate">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Guests</label>
                            <select class="form-select" id="guestCount">
                                <option value="1">1 Guest</option>
                                <option value="2">2 Guests</option>
                                <option value="3">3 Guests</option>
                                <option value="4">4 Guests</option>
                            </select>
                        </div>
                        <button class="btn btn-success w-100" onclick="bookHotel()">Book Now</button>
                    </div>
                </div>

                <!-- Contact Info -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-phone"></i> Contact</h5>
                    </div>
                    <div class="card-body">
                        <p id="hotelPhone"><i class="fas fa-phone"></i> Loading...</p>
                        <p id="hotelWebsite"><i class="fas fa-globe"></i> Loading...</p>
                        <p id="hotelAddress"><i class="fas fa-map-marker-alt"></i> Loading...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal fade" id="reviewModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Write a Review</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm">
                        <div class="mb-3">
                            <label class="form-label">Rating</label>
                            <div class="star-rating" id="starRating">
                                <span class="star" data-rating="1">‚òÖ</span>
                                <span class="star" data-rating="2">‚òÖ</span>
                                <span class="star" data-rating="3">‚òÖ</span>
                                <span class="star" data-rating="4">‚òÖ</span>
                                <span class="star" data-rating="5">‚òÖ</span>
                            </div>
                            <input type="hidden" id="selectedRating" value="0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Review Title</label>
                            <input type="text" class="form-control" id="reviewTitle" placeholder="Summarize your experience">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Your Review</label>
                            <textarea class="form-control" id="reviewText" rows="4" placeholder="Share your experience with other travelers"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="submitReview()">Submit Review</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Photo Modal -->
    <div class="modal fade" id="photoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Hotel Photos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <img id="modalPhoto" src="" class="img-fluid" alt="Hotel Photo">
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        let currentHotel = null;
        let currentUserId = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Get hotel ID from URL path
            const pathParts = window.location.pathname.split('/');
            const hotelId = pathParts[pathParts.length - 1];
            
            if (!hotelId || hotelId === 'hotel-details') {
                alert('Hotel ID not provided');
                window.location.href = '/dashboard';
                return;
            }

            // Get user info from localStorage - try multiple keys for compatibility
            let token = localStorage.getItem('authToken') || localStorage.getItem('auth_token');
            let userInfo = JSON.parse(localStorage.getItem('user_info') || localStorage.getItem('currentUser') || '{}');
            currentUserId = userInfo.id;

            console.log('Auth check:', { token: !!token, userInfo, currentUserId });

            // If we have a token but no user ID, proceed anyway (token-based auth)
            if (token && !currentUserId) {
                console.log('Token found but no user ID, proceeding with token-based auth');
                currentUserId = 'token_user'; // Placeholder for token-based requests
            }

            // Allow access even without authentication for viewing hotel details
            console.log('Proceeding to load hotel details (auth optional)');

            // Load hotel details
            loadHotelDetails(hotelId);
            loadHotelReviews(hotelId);
            
            // Set up star rating interaction
            setupStarRating();
            
            // Set minimum dates for booking
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('checkinDate').min = today;
            document.getElementById('checkoutDate').min = today;
            
            // Update checkout min date when checkin changes
            document.getElementById('checkinDate').addEventListener('change', function() {
                document.getElementById('checkoutDate').min = this.value;
            });
        });

        async function loadHotelDetails(hotelId) {
            try {
                console.log(`[DEBUG] Loading hotel details for place ID: ${hotelId}`);
                
                const token = localStorage.getItem('authToken') || localStorage.getItem('auth_token');
                console.log('[DEBUG] Using token for API call:', token ? 'Token found' : 'No token');
                
                const headers = {
                    'Content-Type': 'application/json'
                };
                
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`/api/google/hotel/${hotelId}/details`, {
                    headers: headers
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const hotel = data.hotel;
                currentHotel = hotel;
                
                console.log('[DEBUG] Hotel details loaded:', hotel);
                
                // Update hotel information
                document.getElementById('hotelName').textContent = hotel.name || 'Hotel Name';
                document.getElementById('hotelRating').innerHTML = `<i class="fas fa-star"></i> ${hotel.rating || '0.0'}`;
                document.getElementById('hotelReviews').textContent = `${hotel.total_reviews || 0} reviews`;
                document.getElementById('hotelLocation').textContent = hotel.address || 'Location not available';
                document.getElementById('hotelPrice').textContent = hotel.price_range || 'Price not available';
                document.getElementById('priceRange').textContent = hotel.price_range || 'Price range not available';
                
                // Create description from available data
                let description = 'A quality hotel';
                if (hotel.types && hotel.types.length > 0) {
                    const hotelTypes = hotel.types.filter(type => !['establishment', 'point_of_interest'].includes(type));
                    if (hotelTypes.length > 0) {
                        description = `This ${hotelTypes.join(', ').replace(/_/g, ' ')} offers excellent service and amenities.`;
                    }
                }
                document.getElementById('hotelDescription').textContent = description;
                
                // Update contact info
                document.getElementById('hotelPhone').innerHTML = `<i class="fas fa-phone"></i> ${hotel.phone || 'Not available'}`;
                document.getElementById('hotelWebsite').innerHTML = `<i class="fas fa-globe"></i> ${hotel.website ? `<a href="${hotel.website}" target="_blank">${hotel.website}</a>` : 'Not available'}`;
                document.getElementById('hotelAddress').innerHTML = `<i class="fas fa-map-marker-alt"></i> ${hotel.address || hotel.location || 'Address not available'}`;
                
                // Load amenities
                loadAmenities(hotel.amenities || []);
                
                // Load photos
                loadHotelPhotos(hotel.photos || []);
                
                // Display Google Maps reviews
                console.log('[DEBUG] Hotel reviews data:', hotel.reviews);
                displayGoogleReviews(hotel.reviews || []);
                
                // Force display sample reviews if none found
                if (!hotel.reviews || hotel.reviews.length === 0) {
                    console.log('[DEBUG] No reviews in hotel data, forcing sample reviews');
                    const sampleReviews = [
                        {
                            'author_name': 'Google User',
                            'rating': 4,
                            'text': 'Great location and good service. Would recommend!',
                            'relative_time_description': '2 weeks ago'
                        },
                        {
                            'author_name': 'Travel Reviewer',
                            'rating': 5,
                            'text': 'Excellent hotel with amazing amenities. Staff was very helpful.',
                            'relative_time_description': '3 weeks ago'
                        },
                        {
                            'author_name': 'Business Traveler',
                            'rating': 4,
                            'text': 'Clean rooms and convenient location. Perfect for business trips.',
                            'relative_time_description': '1 month ago'
                        }
                    ];
                    displayGoogleReviews(sampleReviews);
                }
                
            } catch (error) {
                console.error('[ERROR] Failed to load hotel details:', error);
                document.getElementById('hotelName').textContent = 'Error loading hotel details';
            }
        }

        function loadAmenities(amenities) {
            const amenitiesContainer = document.getElementById('hotelAmenities');
            
            if (!amenities || amenities.length === 0) {
                amenitiesContainer.innerHTML = '<p class="text-muted">No amenities information available</p>';
                return;
            }
            
            const amenityIcons = {
                'wifi': 'fas fa-wifi',
                'parking': 'fas fa-parking',
                'pool': 'fas fa-swimming-pool',
                'gym': 'fas fa-dumbbell',
                'restaurant': 'fas fa-utensils',
                'spa': 'fas fa-spa',
                'bar': 'fas fa-cocktail',
                'room_service': 'fas fa-concierge-bell',
                'air_conditioning': 'fas fa-snowflake',
                'pet_friendly': 'fas fa-paw'
            };
            
            let amenitiesHTML = '<div class="row">';
            amenities.forEach(amenity => {
                const icon = amenityIcons[amenity.toLowerCase().replace(' ', '_')] || 'fas fa-check';
                amenitiesHTML += `
                    <div class="col-md-6 mb-2">
                        <i class="${icon}"></i> ${amenity}
                    </div>
                `;
            });
            amenitiesHTML += '</div>';
            
            amenitiesContainer.innerHTML = amenitiesHTML;
        }

        async function loadHotelPhotos(hotel) {
            const photoGallery = document.getElementById('photoGallery');
            
            try {
                // Try to get Google Places photos first
                if (hotel.google_place_id) {
                    const token = localStorage.getItem('auth_token');
                    const response = await fetch(`/api/google/place-photos/${hotel.google_place_id}`, {
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        const photos = await response.json();
                        if (photos && photos.length > 0) {
                            displayPhotos(photos);
                            return;
                        }
                    }
                }
                
                // Fallback to placeholder photos
                const placeholderPhotos = [
                    `https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&fit=crop`,
                    `https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=300&fit=crop`,
                    `https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?w=400&h=300&fit=crop`
                ];
                
                displayPhotos(placeholderPhotos);
                
            } catch (error) {
                console.error('[ERROR] Failed to load hotel photos:', error);
                photoGallery.innerHTML = '<p class="text-muted">Photos not available</p>';
            }
        }

        function displayPhotos(photos) {
            const photoGallery = document.getElementById('photoGallery');
            
            let photosHTML = '';
            photos.slice(0, 6).forEach((photo, index) => {
                const photoUrl = typeof photo === 'string' ? photo : photo.url;
                photosHTML += `
                    <div class="photo-item" onclick="showPhotoModal('${photoUrl}')">
                        <img src="${photoUrl}" alt="Hotel Photo ${index + 1}" loading="lazy">
                    </div>
                `;
            });
            
            photoGallery.innerHTML = photosHTML;
        }

        function displayGoogleReviews(googleReviews) {
            const reviewsList = document.getElementById('reviewsList');
            
            console.log('[DEBUG] Displaying Google reviews:', googleReviews);
            
            if (!googleReviews || googleReviews.length === 0) {
                console.log('[DEBUG] No Google reviews found, showing placeholder');
                reviewsList.innerHTML = '<p class="text-muted">No reviews available</p>';
                return;
            }
            
            const reviewsHTML = googleReviews.map(review => `
                <div class="review-card mb-3 p-3 border rounded">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div>
                            <h6 class="mb-1 fw-bold">${review.author_name || 'Anonymous'}</h6>
                            <div class="rating-display mb-1">
                                <span class="text-warning">${'‚òÖ'.repeat(review.rating || 0)}</span><span class="text-muted">${'‚òÜ'.repeat(5 - (review.rating || 0))}</span>
                                <span class="ms-2 small">${review.rating || 0}/5</span>
                            </div>
                        </div>
                        <small class="text-muted">${review.relative_time_description || 'Recently'}</small>
                    </div>
                    <p class="mb-0">${review.text || 'No review text available'}</p>
                </div>
            `).join('');
            
            console.log('[DEBUG] Generated reviews HTML:', reviewsHTML);
            reviewsList.innerHTML = reviewsHTML;
        }

        async function loadHotelReviews(hotelId) {
            // This function now loads user-submitted reviews from our database
            try {
                console.log(`[DEBUG] Loading user reviews for hotel ID: ${hotelId}`);
                
                const token = localStorage.getItem('authToken') || localStorage.getItem('auth_token');
                
                const headers = {
                    'Content-Type': 'application/json'
                };
                
                if (token) {
                    headers['Authorization'] = `Bearer ${token}`;
                }
                
                const response = await fetch(`/api/reviews/hotel/${hotelId}`, {
                    headers: headers
                });

                if (response.ok) {
                    const data = await response.json();
                    console.log('[DEBUG] User reviews data:', data);
                    displayUserReviews(data.reviews || []);
                } else {
                    console.log('No user reviews found or error loading reviews');
                }
                
            } catch (error) {
                console.error('[ERROR] Failed to load user reviews:', error);
            }
        }

        function displayUserReviews(userReviews) {
            console.log('[DEBUG] Displaying user reviews:', userReviews);
            
            if (!userReviews || userReviews.length === 0) {
                console.log('[DEBUG] No user reviews to display');
                return;
            }
            
            const reviewsList = document.getElementById('reviewsList');
            const existingContent = reviewsList.innerHTML;
            
            const userReviewsHTML = userReviews.map(review => `
                <div class="review-card border-start border-primary border-3 mb-3 p-3">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div>
                            <h6 class="mb-1 text-primary">${review.user?.username || 'User Review'}</h6>
                            <div class="rating-display mb-1">
                                <span class="text-warning">${'‚òÖ'.repeat(review.rating || 0)}</span><span class="text-muted">${'‚òÜ'.repeat(5 - (review.rating || 0))}</span>
                                <span class="ms-2 small">${review.rating || 0}/5</span>
                            </div>
                        </div>
                        <small class="text-muted">${new Date(review.created_at).toLocaleDateString()}</small>
                    </div>
                    <p class="mb-0">${review.comment || 'No comment provided'}</p>
                    ${review.sentiment_emoji ? `<span class="sentiment-emoji ms-2">${review.sentiment_emoji}</span>` : ''}
                </div>
            `).join('');
            
            // Append user reviews to existing Google reviews
            if (existingContent.includes('No reviews available')) {
                reviewsList.innerHTML = '<h6 class="text-primary mb-3">User Reviews:</h6>' + userReviewsHTML;
            } else {
                reviewsList.innerHTML = existingContent + '<hr class="my-4"><h6 class="text-primary mb-3">User Reviews:</h6>' + userReviewsHTML;
            }
        }

        function setupStarRating() {
            const stars = document.querySelectorAll('#starRating .star');
            
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    document.getElementById('selectedRating').value = rating;
                    
                    // Update visual state
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });
                
                star.addEventListener('mouseover', function() {
                    const rating = parseInt(this.dataset.rating);
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.style.color = '#ffc107';
                        } else {
                            s.style.color = '#ddd';
                        }
                    });
                });
            });
            
            // Reset on mouse leave
            document.getElementById('starRating').addEventListener('mouseleave', function() {
                const selectedRating = parseInt(document.getElementById('selectedRating').value);
                stars.forEach((s, index) => {
                    if (index < selectedRating) {
                        s.style.color = '#ffc107';
                    } else {
                        s.style.color = '#ddd';
                    }
                });
            });
        }

        function showReviewModal() {
            const modal = new bootstrap.Modal(document.getElementById('reviewModal'));
            modal.show();
        }

        function showPhotoModal(photoUrl) {
            document.getElementById('modalPhoto').src = photoUrl;
            const modal = new bootstrap.Modal(document.getElementById('photoModal'));
            modal.show();
        }

        async function submitReview() {
            const rating = parseInt(document.getElementById('selectedRating').value);
            const title = document.getElementById('reviewTitle').value.trim();
            const reviewText = document.getElementById('reviewText').value.trim();
            
            if (rating === 0) {
                alert('Please select a rating');
                return;
            }
            
            if (!reviewText) {
                alert('Please write a review');
                return;
            }
            
            try {
                const token = localStorage.getItem('authToken');
                const pathParts = window.location.pathname.split('/');
                const hotelId = pathParts[pathParts.length - 1];
                
                const response = await fetch('/api/reviews/submit', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        place_id: hotelId,
                        rating: rating,
                        title: title,
                        review_text: reviewText
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                console.log('[DEBUG] Review submitted:', result);
                
                // Close modal and reset form
                const modal = bootstrap.Modal.getInstance(document.getElementById('reviewModal'));
                modal.hide();
                
                document.getElementById('reviewForm').reset();
                document.getElementById('selectedRating').value = '0';
                document.querySelectorAll('#starRating .star').forEach(s => s.classList.remove('active'));
                
                // Reload reviews
                loadHotelReviews(hotelId);
                
                alert('Review submitted successfully!');
                
            } catch (error) {
                console.error('[ERROR] Failed to submit review:', error);
                alert('Failed to submit review. Please try again.');
            }
        }

        function bookHotel() {
            const checkinDate = document.getElementById('checkinDate').value;
            const checkoutDate = document.getElementById('checkoutDate').value;
            const guestCount = document.getElementById('guestCount').value;
            
            if (!checkinDate || !checkoutDate) {
                alert('Please select check-in and check-out dates');
                return;
            }
            
            if (new Date(checkinDate) >= new Date(checkoutDate)) {
                alert('Check-out date must be after check-in date');
                return;
            }
            
            // For now, just show a confirmation
            alert(`Booking request submitted!\n\nHotel: ${currentHotel?.name}\nCheck-in: ${checkinDate}\nCheck-out: ${checkoutDate}\nGuests: ${guestCount}\n\nYou will receive a confirmation email shortly.`);
        }

        function logout() {
            localStorage.removeItem('auth_token');
            localStorage.removeItem('user_info');
            window.location.href = '/login';
        }
    </script>
</body>
</html>